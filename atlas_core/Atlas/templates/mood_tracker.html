{% extends 'dashboard.html' %}
{% load static %}

{% block title %}Mood Tracker | Healing Atlas{% endblock %}

{% block extra_head %}
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="{% static 'css/Atlas_mood_tracker.css' %}">
{% endblock %}

{% block content %}
  <div class="mood-tracker-container">
    <h1><i class="fas fa-face-smile-beam"></i> How are you feeling today?</h1>
    
    <form method="post">
      {% csrf_token %}
      <label for="mood">Select your mood:</label>
      <select name="mood" id="mood">
        <option value="calm">Calm</option>
        <option value="anxious">Anxious</option>
        <option value="hopeful">Hopeful</option>
        <option value="tired">Tired</option>
        <option value="angry">Angry</option>
        <option value="grateful">Grateful</option>
      </select>

      <label for="note">Would you like to share more?</label>
      <textarea name="note" id="note" rows="4" placeholder="Write freely..."></textarea>

      <button type="submit">Save Check-In</button>
    </form>

    <a href="{% url 'checkins' %}" class="view-checkins-button">
      <i class="fas fa-book-heart"></i> View All Check-Ins
    </a>

    <div class="footer-note">Â© 2025 Healing Atlas. Every feeling is welcome here.</div>
  </div>

  {% if emotion_data %}
    <div class="chart-container">
      <h2><i class="fas fa-chart-line"></i> Emotional Trends</h2>
      {% for entry in emotion_data %}
        <div class="emotion-card">
          <div class="emotion-date"><i class="fas fa-calendar-day"></i> {{ entry.date }}</div>
          <div class="emotion-score"><strong>Mood:</strong> {{ entry.mood|title }}</div>
          {% if entry.note %}
            <div class="emotion-sentiment"><strong>Note:</strong> {{ entry.note }}</div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {% if messages %}
    <div class="confirmation-message">
      {% for message in messages %}
        <p>{{ message }}</p>
      {% endfor %}
    </div>
  {% endif %}
{% endblock %}
