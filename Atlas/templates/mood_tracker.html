{% extends 'dashboard.html' %}
{% load static %}
{% block title %}Mood Tracker 🌤️ | Healing Atlas{% endblock %}

{% block content %}
  <style>
    .mood-tracker-container {
      max-width: 700px;
      margin: 3rem auto;
      padding: 2rem;
      background-color: #fffaf7;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      font-family: 'Segoe UI', sans-serif;
      color: #333;
    }

    h1 {
      font-size: 2rem;
      color: #c04e90;
      margin-bottom: 0.5rem;
    }

    p {
      font-size: 1rem;
      margin-bottom: 2rem;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    label {
      font-weight: bold;
      color: #4a2c2a;
    }

    select, textarea {
      padding: 0.75rem;
      border: 2px solid #f4c2c2;
      border-radius: 8px;
      font-size: 1rem;
      background-color: #fff;
    }

    textarea::placeholder {
      color: #aaa;
    }

    button {
      align-self: flex-start;
      padding: 0.75rem 1.5rem;
      background-color: #d16ba5;
      color: white;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
    }

    .footer-note {
      text-align: center;
      padding-top: 2rem;
      font-size: 0.9rem;
      color: #888;
    }

    .chart-container {
      max-width: 700px;
      margin: 3rem auto;
      padding: 2rem;
      background-color: #fef6f9;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
    }
  </style>

  <div class="mood-tracker-container">
    <h1>How are you feeling today? 🌤️</h1>
    <form method="post">
      {% csrf_token %}
      <label for="mood">Select your mood:</label>
      <select name="mood" id="mood">
        <option value="calm">🌿 Calm</option>
        <option value="anxious">🌪️ Anxious</option>
        <option value="hopeful">🌈 Hopeful</option>
        <option value="tired">😴 Tired</option>
        <option value="angry">🔥 Angry</option>
        <option value="grateful">💖 Grateful</option>
      </select>

      <label for="note">Would you like to share more?</label>
      <textarea name="note" id="note" rows="4" placeholder="Write freely..."></textarea>

      <button type="submit">Save Check-In</button>
    </form>

    <div class="footer-note">© 2025 Healing Atlas. Every feeling is welcome here.</div>
  </div>

  {% if show_chart %}
  <div class="chart-container" style="max-width: 700px; margin: 3rem auto;">
    <canvas id="emotionChart"></canvas>
  </div>

  <!-- Load Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Load your custom chart logic -->
  <script src="{% static 'js/emotionChart.js' %}"></script>

  {% if emotion_data %}
    <script>
      const sentiment = emotionData[context.dataIndex].sentiment;
    </script>
  {% endif %}
{% endif %}
{% endblock %}

{% block extra_head %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
{% endblock %}